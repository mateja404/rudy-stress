<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Rudy Stresser | Admin Panel</title>
    <link rel="stylesheet" href="css/admin.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <header>
        <ul>
            <li data-tab-target="#news" class="hideOnMobile"><a href="#"3
                ><i class='bx bx-news'></i> News</a></li>
            <li data-tab-target="#reedem" class="hideOnMobile"><a href="#"><i class='bx bx-barcode-reader'></i> Reedem Code</a></li>
            <li data-tab-target="#apis" class="hideOnMobile"><a href="#"><i class='bx bx-code-block'></i> APIs</a></li>
            <li data-tab-target="#users" class="hideOnMobile"><a href="#"><i class='bx bxs-user-rectangle'></i> Users</a></li>
            <li data-tab-target="#settings" class="hideOnMobile"><a href="#"><i class='bx bxs-cog' ></i> Settings</a></li>
            <li data-tab-target="#blacklist" class="hideOnMobile"><a href="#"><i class='bx bxs-message-alt-x'></i> Blacklist</a></li>
            <li class="menu-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg></li>
        </ul>
        <ul class="sidebar">
            <li data-tab-target="#news"><a href="#"><i class='bx bx-news'></i> News</a></li>
            <li data-tab-target="#reedem"><a href="#"><i class='bx bx-barcode-reader'></i> Reedem Code</a></li>
            <li data-tab-target="#apis"><a href="#"><i class='bx bx-code-block'></i> APIs</a></li>
            <li data-tab-target="#users"><a href="#"><i class='bx bxs-user-rectangle'></i> Users</a></li>
            <li data-tab-target="#settings"><a href="#"><i class='bx bxs-cog' ></i> Settings</a></li>
            <li data-tab-target="#blacklist"><a href="#"><i class='bx bxs-message-alt-x'></i> Blacklist</a></li>
        </ul>
    </header>

    <main>
        <section id="news" class="actives" data-tab-content>
            <div class="news-sec">
                <h1>News</h1>
                <form action="/admin/news" method="POST">
                    <label for="title">Title:</label>
                    <input type="text" id="title" name="title" placeholder="Enter news title" required>

                    <label for="content">Content:</label>
                    <input type="text" id="content" name="content" placeholder="Enter news content" required>

                    <button type="submit">Add News</button>
                </form>
            </div>
            <div class="active-news">
                <h2>News List</h2>
                <% if (locals.news && locals.news.length > 0) { %>
                    <% locals.news.forEach(newsItem => { %>
                        <div class="news">
                            <h2><%= newsItem.title %></h2>
                            <p><%= newsItem.content %></p>
                            <p><%= newsItem.created_at %></p>
                            <form action="/delete-news/<%= newsItem.id %>" method="POST">
                                <button type="submit" style="margin-left: auto; margin-right: auto; width: 50%">Delete</button>
                            </form>
                        </div>
                    <% }); %>
                <% } else { %>
                    <p>No news items available.</p>
                <% } %>
            </div>
        </section>
        <section id="reedem" data-tab-content>
            <div class="reedem-sec">
                <h3>Generate Redeem Code</h3>
                <form action="/admin/generate-redeem-code" method="POST">
                    <label for="plan">Select Plan:</label>
                    <select name="planName" id="plan">
                        <% plans.forEach(plan => { %>
                            <option value="<%= plan.plan_name %>"><%= plan.plan_name %></option>
                        <% }) %>
                    </select>
                    <button type="submit">Generate Code</button>
                </form>
            </div>
        </section>

        <section id="apis" data-tab-content>
            <div class="apis-sec">
                <h2>Available APIs</h2>
                <a href="#" class="reveal-click">Reveal API</a>
                <table>
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Username</th>
                        <th>Password</th>
                        <th>Base URL</th>
                    </tr>
                    </thead>
                    <tbody>
                    <% if (apis && apis.length > 0) { %>
                        <% apis.forEach(api => { %>
                            <tr>
                                <td><%= api.id %></td>
                                <td class="base-url"><%= api.api_name %></td>
                                <td class="base-url"><%= api.username %></td>
                                <td class="base-url"><%= api.password %></td>
                                <td class="base-url"><%= api.base_url %></td>
                            </tr>
                        <% }); %>
                    <% } else { %>
                        <tr>
                            <td colspan="5">No APIs available.</td>
                        </tr>
                    <% } %>
                    </tbody>
                </table>
                <h2>Add New API</h2>
                <div class="inputs">
                    <form action="/admin/add-api" method="POST">
                        <input type="hidden" name="id" value="">
                        <label for="api_name">API Name:</label>
                        <input type="text" id="api_name" name="api_name" placeholder="Enter API name" required>

                        <label for="username">Username:</label>
                        <input type="text" id="username" name="username" placeholder="Enter username" required>

                        <label for="password">Password:</label>
                        <input type="password" id="password" name="password" placeholder="Enter password" required>

                        <label for="base_url">Base URL:</label>
                        <input type="url" id="base_url" name="base_url" placeholder="Enter base URL" required>

                        <button type="submit">Add API</button>
                    </form>
                </div>

                <% if (apis.length > 0) { %>
                    <h2>Delete API</h2>
                    <form action="/admin/delete-api" method="POST">
                        <label for="delete_api_id">API ID:</label>
                        <select id="delete_api_id" name="id" required>
                            <option value="">Select an API to delete</option>
                            <% apis.forEach(api => { %>
                                <option value="<%= api.id %>"><%= api.api_name %></option>
                            <% }); %>
                        </select>
                        <button type="submit">Delete API</button>
                    </form>
                <% } %>
            </div>
        </section>
    </main>
<script src="js/admin.js"></script>
</body>
</html>